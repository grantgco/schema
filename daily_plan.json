{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ADD-Friendly Daily Plan",
  "type": "object",
  "required": ["metadata", "overview", "plans"],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["date", "created"],
      "properties": {
        "date": {
          "type": "string",
          "format": "date",
          "description": "The date this plan is for (YYYY-MM-DD)"
        },
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "When this plan was created (ISO 8601 format)"
        },
        "energy_level": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "Expected energy level for the day"
        },
        "location": {
          "type": "string",
          "description": "Primary location for the day (home, office, mixed, etc.)"
        },
        "source_info": {
          "type": "object",
          "description": "Information about the source material used to create this plan",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["transcript", "voice_memo", "written_notes", "daily_notes", "meeting_notes", "document", "other"],
              "description": "Type of source material"
            },
            "duration": {
              "type": "string",
              "description": "Duration if audio/video (e.g., '45m', '1h30m')"
            },
            "participants": {
              "type": "array",
              "description": "People who participated in creating the source material",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "overview": {
      "type": "object",
      "required": ["theme", "top_priorities"],
      "properties": {
        "title": {
          "type": "string",
          "description": "Meaningful title for this daily plan",
          "minLength": 5,
          "maxLength": 200
        },
        "theme": {
          "type": "string",
          "description": "Overall theme or focus for the day"
        },
        "executive_summary": {
          "type": "string",
          "description": "2-3 sentences capturing the day's main focus and goals",
          "minLength": 50,
          "maxLength": 500
        },
        "energy_pattern": {
          "type": "string",
          "description": "When you typically have peak focus (e.g., 'Morning Peak Focus')"
        },
        "top_priorities": {
          "type": "array",
          "minItems": 1,
          "maxItems": 5,
          "items": {
            "type": "object",
            "required": ["task", "priority"],
            "properties": {
              "task": {
                "type": "string",
                "description": "The priority task description"
              },
              "priority": {
                "type": "integer",
                "minimum": 1,
                "maximum": 5,
                "description": "Priority rank (1 = highest)"
              },
              "importance_level": {
                "type": "string",
                "enum": ["critical", "high", "medium", "low"],
                "description": "Level of importance (aligned with summary schema)"
              },
              "time_sensitive": {
                "type": "boolean",
                "default": false,
                "description": "Whether this task has a hard deadline today"
              },
              "estimated_duration": {
                "type": "string",
                "pattern": "^\\d+[hm]$",
                "description": "Estimated time needed (e.g., '2h', '45m')"
              },
              "assigned_to": {
                "type": "string",
                "description": "Person responsible (if not self)"
              },
              "context": {
                "type": "string",
                "description": "Context or location where task can be performed (@home, @office, @calls, etc.)"
              },
              "taskpaper_format": {
                "type": "string",
                "description": "Task in TaskPaper format for future processing"
              }
            }
          }
        },
        "time_sensitive_items": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Items with specific deadlines or appointments"
        },
        "key_topics": {
          "type": "array",
          "description": "Main subjects or focus areas for the day",
          "items": {
            "type": "string",
            "minLength": 2
          },
          "minItems": 1,
          "maxItems": 10
        },
        "keywords": {
          "type": "array",
          "description": "Keywords for categorization and search",
          "items": {
            "type": "string",
            "minLength": 2,
            "maxLength": 50
          },
          "minItems": 3,
          "maxItems": 15,
          "uniqueItems": true
        }
      }
    },
    "people_roles": {
      "type": "array",
      "description": "Key individuals involved in today's activities",
      "items": {
        "type": "object",
        "required": ["name", "role"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Person's name",
            "minLength": 1
          },
          "role": {
            "type": "string",
            "description": "Their role or involvement in today's activities"
          },
          "contact_info": {
            "type": "string",
            "description": "Email, phone, or other contact information"
          },
          "department": {
            "type": "string",
            "description": "Department or team they belong to"
          },
          "today_interactions": {
            "type": "array",
            "description": "Planned interactions or meetings with this person today",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "horizons": {
      "type": "object",
      "description": "Future-focused planning and tracking for projects and tasks beyond today",
      "properties": {
        "upcoming_deadlines": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["task", "due_date"],
            "properties": {
              "task": {
                "type": "string",
                "description": "Task or project description"
              },
              "due_date": {
                "type": "string",
                "format": "date",
                "description": "When this is due (YYYY-MM-DD)"
              },
              "days_until_due": {
                "type": "integer",
                "description": "Number of days from today until due date"
              },
              "priority": {
                "type": "string",
                "enum": ["urgent", "high", "medium", "low"],
                "description": "Priority level (aligned with summary schema)"
              },
              "importance_level": {
                "type": "string",
                "enum": ["critical", "high", "medium", "low"],
                "description": "Level of importance"
              },
              "project": {
                "type": "string",
                "description": "Parent project this task belongs to"
              },
              "assigned_to": {
                "type": "string",
                "description": "Person responsible for this deadline"
              },
              "taskpaper_format": {
                "type": "string",
                "description": "Task in TaskPaper format (@due(YYYY-MM-DD) @project(name) @defer(YYYY-MM-DD) etc.)"
              }
            }
          }
        },
        "active_projects": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "status"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Project name"
              },
              "description": {
                "type": "string",
                "description": "Brief description of the project"
              },
              "status": {
                "type": "string",
                "enum": ["planning", "active", "on-hold", "waiting", "review", "completed", "cancelled"],
                "description": "Current project status (aligned with summary schema)"
              },
              "next_action": {
                "type": "string",
                "description": "Next concrete action needed for this project"
              },
              "target_date": {
                "type": "string",
                "format": "date",
                "description": "Target completion date"
              },
              "defer_date": {
                "type": "string",
                "format": "date",
                "description": "When to next review this project (YYYY-MM-DD)"
              },
              "assigned_to": {
                "type": "string",
                "description": "Primary person responsible for this project"
              },
              "context": {
                "type": "string",
                "description": "Where/how this work gets done (@home, @office, @calls, etc.)"
              },
              "estimated_duration": {
                "type": "string",
                "description": "Estimated total project duration (e.g., '2w', '1m', '3d')"
              },
              "taskpaper_format": {
                "type": "string",
                "description": "Project in TaskPaper format with tags including @defer(YYYY-MM-DD) for future review dates"
              }
            }
          }
        },
        "someday_maybe": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["item", "category"],
            "properties": {
              "item": {
                "type": "string",
                "description": "Thing you might want to do someday"
              },
              "category": {
                "type": "string",
                "enum": ["project", "learning", "experience", "purchase", "misc"],
                "description": "Type of someday/maybe item"
              },
              "added_date": {
                "type": "string",
                "format": "date",
                "description": "When this was added to the list"
              },
              "defer_date": {
                "type": "string",
                "format": "date",
                "description": "When to review this item next (YYYY-MM-DD)"
              },
              "energy_required": {
                "type": "string",
                "enum": ["low", "medium", "high"],
                "description": "Energy level needed for this item"
              },
              "estimated_duration": {
                "type": "string",
                "description": "Estimated time needed (e.g., '30m', '2h', '1d')"
              },
              "taskpaper_format": {
                "type": "string",
                "description": "Item in TaskPaper format (@someday @defer(YYYY-MM-DD) @category etc.)"
              }
            }
          }
        },
        "waiting_for": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["item", "waiting_on"],
            "properties": {
              "item": {
                "type": "string",
                "description": "What you're waiting for"
              },
              "waiting_on": {
                "type": "string",
                "description": "Who or what you're waiting on"
              },
              "date_requested": {
                "type": "string",
                "format": "date",
                "description": "When you made the request"
              },
              "follow_up_date": {
                "type": "string",
                "format": "date",
                "description": "When to follow up if no response"
              },
              "defer_date": {
                "type": "string",
                "format": "date",
                "description": "When to check on this next (YYYY-MM-DD)"
              },
              "project": {
                "type": "string",
                "description": "Related project if applicable"
              },
              "priority": {
                "type": "string",
                "enum": ["urgent", "high", "medium", "low"],
                "description": "Priority level for follow-up"
              },
              "taskpaper_format": {
                "type": "string",
                "description": "Item in TaskPaper format (@waiting @person @defer(YYYY-MM-DD) etc.)"
              }
            }
          }
        },
        "decisions_made": {
          "type": "array",
          "description": "Decisions that affect future planning",
          "items": {
            "type": "object",
            "required": ["decision", "context"],
            "properties": {
              "decision": {
                "type": "string",
                "description": "The specific decision made",
                "minLength": 5
              },
              "context": {
                "type": "string",
                "description": "Background or reasoning for the decision"
              },
              "decision_maker": {
                "type": "string",
                "description": "Person or group who made the decision"
              },
              "impact": {
                "type": "string",
                "description": "Expected impact on planning or priorities"
              },
              "follow_up_date": {
                "type": "string",
                "format": "date",
                "description": "When to review or follow up on this decision"
              }
            }
          }
        },
        "weekly_review_items": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Items to review in weekly planning sessions"
        }
      }
    },
    "plans": {
      "type": "object",
      "required": ["plan_a"],
      "properties": {
        "plan_a": {
          "$ref": "#/definitions/plan_structure",
          "description": "Ideal flow plan - everything goes smoothly"
        },
        "plan_b": {
          "$ref": "#/definitions/contingency_plan",
          "description": "Modified plan for minor delays (15-30 minutes)"
        },
        "plan_c": {
          "$ref": "#/definitions/contingency_plan",
          "description": "Crisis mode plan - essential items only"
        }
      }
    },
    "strategic_guidance": {
      "type": "object",
      "properties": {
        "energy_management": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tips for managing energy throughout the day"
        },
        "focus_blocks": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "time_range": {
                "type": "string",
                "pattern": "^\\d{1,2}:\\d{2}-\\d{1,2}:\\d{2}$",
                "description": "Time range in HH:MM-HH:MM format"
              },
              "purpose": {
                "type": "string",
                "description": "What this focus block is for"
              }
            }
          }
        },
        "break_schedule": {
          "type": "string",
          "description": "Guidelines for when to take breaks"
        }
      }
    },
    "assistant_notes": {
      "type": "object",
      "properties": {
        "important_information": {
          "type": "array",
          "description": "Critical details, insights, or updates for today",
          "items": {
            "type": "object",
            "required": ["information", "importance_level"],
            "properties": {
              "information": {
                "type": "string",
                "description": "The important information or insight",
                "minLength": 10
              },
              "importance_level": {
                "type": "string",
                "enum": ["critical", "high", "medium", "low"],
                "description": "Level of importance"
              },
              "category": {
                "type": "string",
                "description": "Category or type of information (e.g., financial, technical, strategic)"
              },
              "time_sensitive": {
                "type": "boolean",
                "description": "Whether this information is time-sensitive"
              }
            }
          }
        },
        "pre_meeting_checklists": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "description": "Checklists organized by meeting/task name"
        },
        "quick_wins": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Small tasks that can be done between major items"
        },
        "reminders": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Important reminders or notes"
        },
        "next_steps": {
          "type": "array",
          "description": "Actions identified for future days",
          "items": {
            "type": "object",
            "required": ["action", "priority"],
            "properties": {
              "action": {
                "type": "string",
                "description": "Specific action to be taken",
                "minLength": 5
              },
              "priority": {
                "type": "string",
                "enum": ["urgent", "high", "medium", "low"],
                "description": "Priority level of the action"
              },
              "assigned_to": {
                "type": "string",
                "description": "Person responsible for the action"
              },
              "due_date": {
                "type": "string",
                "format": "date",
                "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
                "description": "Due date in YYYY-MM-DD format"
              },
              "defer_date": {
                "type": "string",
                "format": "date",
                "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
                "description": "Defer date in YYYY-MM-DD format when action should start"
              },
              "dependencies": {
                "type": "array",
                "description": "Other actions or conditions this depends on",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        },
        "taskpaper_export": {
          "type": "object",
          "description": "Ready-to-use TaskPaper formatted content for external processing",
          "properties": {
            "today_tasks": {
              "type": "string",
              "description": "Today's tasks in TaskPaper format"
            },
            "projects": {
              "type": "string",
              "description": "Active projects in TaskPaper format"
            },
            "waiting_for": {
              "type": "string",
              "description": "Waiting for items in TaskPaper format"
            },
            "someday_maybe": {
              "type": "string",
              "description": "Someday/maybe items in TaskPaper format"
            },
            "full_export": {
              "type": "string",
              "description": "Complete TaskPaper export following TaskPaper guidelines for OmniOutliner/OmniFocus import"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "plan_structure": {
      "type": "object",
      "required": ["time_blocks"],
      "properties": {
        "time_blocks": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/time_block"
          }
        },
        "flexible_time": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "time_range": {
                "type": "string",
                "pattern": "^\\d{1,2}:\\d{2}-\\d{1,2}:\\d{2}$"
              },
              "options": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "description": "Time slots with multiple possible activities"
        }
      }
    },
    "contingency_plan": {
      "type": "object",
      "required": ["modifications"],
      "properties": {
        "modifications": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "What changes from Plan A"
        },
        "core_preserved": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Non-negotiable items that must remain"
        },
        "deferred_items": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tasks that can be moved to another day"
        },
        "time_blocks": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/time_block"
          },
          "description": "Modified schedule if different from Plan A"
        }
      }
    },
    "time_block": {
      "type": "object",
      "required": ["time_range", "activities"],
      "properties": {
        "label": {
          "type": "string",
          "description": "Name for this time period (e.g., 'Early Morning')"
        },
        "time_range": {
          "type": "string",
          "pattern": "^\\d{1,2}:\\d{2}-\\d{1,2}:\\d{2}$",
          "description": "Time range in HH:MM-HH:MM format"
        },
        "activities": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["time", "task"],
            "properties": {
              "time": {
                "type": "string",
                "pattern": "^\\d{1,2}:\\d{2}-\\d{1,2}:\\d{2}$",
                "description": "Specific time slot"
              },
              "task": {
                "type": "string",
                "description": "What to do during this time"
              },
              "type": {
                "type": "string",
                "enum": ["focus", "meeting", "admin", "break", "flexible"],
                "description": "Category of activity"
              },
              "assigned_to": {
                "type": "string",
                "description": "Person responsible (if not self)"
              },
              "context": {
                "type": "string",
                "description": "Where/how this task is performed (@home, @office, @calls, etc.)"
              },
              "estimated_duration": {
                "type": "string",
                "description": "Expected duration (e.g., '30m', '1h', '90m')"
              },
              "subtasks": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Bullet points for complex activities"
              },
              "preparation_needed": {
                "type": "string",
                "description": "What prep is needed before this activity"
              },
              "taskpaper_format": {
                "type": "string",
                "description": "Activity in TaskPaper format with appropriate tags"
              }
            }
          }
        }
      }
    }
  }
}
